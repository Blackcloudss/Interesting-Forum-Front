Page({
  data: {
    navScrollLeft: 0,
    navItems: ['èµ„æ–™åˆ†äº«', 'è¯¾ç¨‹è¯„ä»·', 'èµ›äº‹å¤§å…¨', 'ç­”ç–‘è§£æƒ‘'],
    posts: {
      'èµ„æ–™åˆ†äº«': [
        
        {
          id:1,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ„æ–™åˆ†äº«.png',
          username: 'Pursue',
          time: 'åˆšåˆš',
          content: 'æ±‚å¤‡ç”¨æœº,æœ‰æ²¡æœ‰å‡ºè‹¹æžœæ‰‹æœºå¤‡ç”¨æœºçš„å‹å‹',
          likes: 0,
          comments: 0,
        },
        {
          id:2,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ2.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ„æ–™åˆ†äº«.png',
          username: 'æŠ˜æ˜Ÿ',
          time: '1åˆ†é’Ÿå‰',
          content: 'ä½Žä»·å‡ºæœ€æ–°å›½è€ƒ,ç²‰ç¬”æ•™èµ„,ä¸“å››ä¸“å…«ç­‰èµ„æ–™',
          likes: 1,
          comments: 1,
        },
        {
          id:3,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ„æ–™åˆ†äº«.png',
          username: 'é‚¶é‚¶',
          time: '2åˆ†é’Ÿå‰',
          content: '20rå‡ºä¸€ä¸ªå…¨æ–°çš„ç”µè„‘æ”¯æž¶',
          likes: 2,
          comments: 2,
        },
        {
          id:4,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ4.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ„æ–™åˆ†äº«.png',
          username: 'è±†æµ†',
          time: '1å¤©å‰',
          content: 'å‡ºã€Šå“ªå’2ã€‹ç”µå½±ç¥¨,åœ°ç‚¹:ä½³çº·å¤©åœ°',
          likes: 3,
          comments: 3,
        },
        {
          id:5,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ5.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ„æ–™åˆ†äº«.png',
          username: 'é‚¹å›´æœ‰ç‡•å­çš„æ™´å¤©',
          time: '2å¤©å‰',
          content: 'å‡ºä¸€å¼ åŠžå…¬æ¤…,50r,å¯å°åˆ€',
          likes: 4,
          comments: 4,
        },
        {
          id:6,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ„æ–™åˆ†äº«.png',
          username: 'Pursue',
          time: '3å¤©å‰',
          content: 'æ±‚å¤§äºŒä¸‹å†Œç½‘ç»œå®‰å…¨ä¸“ä¸šçš„æ•™æ',
          likes: 5,
          comments: 5,
        }

      ],
      'è¯¾ç¨‹è¯„ä»·': [
        {
          id:7,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/è¯¾ç¨‹è¯„ä»·.png',
          username: 'Pursue',
          time: 'åˆšåˆš',
          content: 'ä¸¢å¤±ä¸€æŠŠé’¥åŒ™ðŸ”‘,äºŒé¥­é™„è¿‘',
          likes: 0,
          comments: 0,
        },
        {
          id:8,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ2.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/è¯¾ç¨‹è¯„ä»·.png',
          username: 'æŠ˜æ˜Ÿ',
          time: '1åˆ†é’Ÿå‰',
          content: 'æ¡åˆ°ä¸€æœ¬ã€Šé«˜ç­‰æ•°å­¦ã€‹ä¸Šå†Œçš„ä¹¦ðŸ“–,åœ¨å›¾ä¹¦é¦†é—¨å£',
          likes: 1,
          comments: 1,
        },
        {
          id:9,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/è¯¾ç¨‹è¯„ä»·.png',
          username: 'é‚¶é‚¶',
          time: '2åˆ†é’Ÿå‰',
          content: 'é»‘è‰²æ¯å­,æ“åœºæ—è¾¹ä¸¢å¤±',
          likes: 2,
          comments: 2,
        },
        {
          id:10,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ4.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/è¯¾ç¨‹è¯„ä»·.png',
          username: 'è±†æµ†',
          time: '1å¤©å‰',
          content: 'åœ¨ä½“è‚²é¦†æ—è¾¹æ¡åˆ°ç²‰è‰²è€³æœº,é—å¤±è€…å¯è”ç³»',
          likes: 3,
          comments: 3,
        },
        {
          id:11,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ5.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/è¯¾ç¨‹è¯„ä»·.png',
          username: 'é‚¹å›´æœ‰ç‡•å­çš„æ™´å¤©',
          time: '2å¤©å‰',
          content: 'æ•™å­¦æ¥¼6aé—å¤±ç™½è‰²ä¹¦åŒ…',
          likes: 4,
          comments: 4,
        },
        {
          id:12,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/è¯¾ç¨‹è¯„ä»·.png',
          username: 'Pursue',
          time: '3å¤©å‰',
          content: 'è°åœ¨ä¸€é¥­äºŒæ¥¼æ¤…å­ä¸Šçœ‹è§ä¸€æŠŠæœ‰ç²‰è‰²çˆ±å¿ƒçš„é›¨ä¼žðŸ¥¹ðŸ¥¹',
          likes: 5,
          comments: 5,
        }
      ],
      'èµ›äº‹å¤§å…¨': [
        {
          id:13,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ›äº‹å¤§å…¨.png',
          username: 'Pursue',
          time: 'åˆšåˆš',
          content: 'æœ‰é—²ç½®åŽšè¡£æœçš„åŒå­¦å¯ä»¥æç»™æµæµªåŠ¨ç‰©ï¼Œä¸€èµ·é€’æ¸©æš–',
          likes: 0,
          comments: 0,
        },
        {
          id:14,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ2.png',
           avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ›äº‹å¤§å…¨.png',
          username: 'æŠ˜æ˜Ÿ',
          time: '1åˆ†é’Ÿå‰',
          content: 'ä½“è‚²é¦†å›´æ é‡Œæœ‰åªæµæµªç‹—è¢«å›°ï¼Œæ€¥éœ€æ•‘åŠ©ï¼Œæœ‰çˆ±å¿ƒäººå£«è¯·å¸®å¿™ï¼Œä¸€èµ·æ‹¯æ•‘å®ƒï¼',
          likes: 1,
          comments: 1,
        },
        {
          id:15,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ3.png',
           avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ›äº‹å¤§å…¨.png',
          username: 'é‚¶é‚¶',
          time: '2åˆ†é’Ÿå‰',
          content: 'æŸåŒå­¦å®¶åº­å˜æ•…ï¼Œç”Ÿæ´»å›°éš¾ï¼Œå¸Œæœ›æœ‰åŒå­¦èƒ½æèµ ç”Ÿæ´»ç”¨å“æˆ–æä¾›å¸®åŠ©',
          likes: 2,
          comments: 2,
        },
        {
          id:16,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ4.png',
         avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ›äº‹å¤§å…¨.png',
          username: 'è±†æµ†',
          time: '1å¤©å‰',
          content: 'èŽžé¦¨ç¤¾åŒºæ¥¼ä¸‹å°çŒ«æ€¥éœ€é¿å¯’å°çªï¼Œä»Šæ™šæš‚å­˜æŸœè§ï¼Œä¸€èµ·ç”¨çº¸ç®±æ—§è¡£æœDIYçŒ«å±‹ï¼',
          likes: 3,
          comments: 3,
        },
        {
          id:17,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ5.png',
         avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ›äº‹å¤§å…¨.png',
          username: 'é‚¹å›´æœ‰ç‡•å­çš„æ™´å¤©',
          time: '2å¤©å‰',
          content: 'å›žæ”¶é—²ç½®å†¬è¡£&æ£‰è¡£ï¼Œæ¸…æ´—åŽèµ ä¸Žå›°éš¾åŒå­¦',
          likes: 4,
          comments: 4,
        },
        {
          id:18,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
         avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/èµ›äº‹å¤§å…¨.png',
          username: 'Pursue',
          time: '3å¤©å‰',
          content: 'é‚£åªé»„è‰²çš„èƒ–çŒ«æœ‰çŒ«ç˜Ÿï¼Œè™½ç„¶çŒ«ç˜Ÿä¸ä¼šå¯¹äººæœ‰å½±å“ï¼Œä½†æ˜¯å¯¹å…¶ä»–å°çŒ«æœ‰å½±å“ï¼Œè¯·å¤§å®¶æ‘¸å®ŒåŽæ´—æ‰‹å†æ‘¸å…¶ä»–å°çŒ«å’ª',
          likes: 5,
          comments: 5,
        }
      ],
      'ç­”ç–‘è§£æƒ‘': [
        {
          id:19,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/ç­”ç–‘è§£æƒ‘.png',
          username: 'Pursue',
          time: 'åˆšåˆš',
          content: 'å››é¥­çš„â€œåƒé‡Œé¦™â€é¦„é¥¨åº—è¶…å¥½åƒï¼ŒæŽ¨èåŒå­¦ä»¬åŽ»',
          likes: 0,
          comments: 0,
        },
        {
          id:20,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ2.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/ç­”ç–‘è§£æƒ‘.png',
          username: 'æŠ˜æ˜Ÿ',
          time: '1åˆ†é’Ÿå‰',
          content: 'æ ¡å›­å‘¨è¾¹å‰§æœ¬æ€æŽ¢åº—ï¼Œå“ªå®¶çš„DMä¼šå¸¦ï¼Œæ±‚æŽ¨',
          likes: 1,
          comments: 1,
        },
        {
          id:21,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/ç­”ç–‘è§£æƒ‘.png',
          username: 'é‚¶é‚¶',
          time: '2åˆ†é’Ÿå‰',
          content: 'è§£é”æ ¡å›­ç¾Žé£Ÿæ–°åœ°æ ‡ï¼Œæ¾å±±æ¹–ä¸‡ç§‘çš„çƒ¤é±¼å¾ˆé¦™å¾ˆå¥½åƒï¼',
          likes: 2,
          comments: 2,
        },
        {
          id:22,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ4.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/ç­”ç–‘è§£æƒ‘.png',
          username: 'è±†æµ†',
          time: '1å¤©å‰',
          content: 'è°æ‡‚å•Šï¼Œå¹¿éš†è›‹æŒžçŽ‹çš„èŠ‹æ³¥åŽšè›‹ç³•ç»äº†ï¼è›‹æŒžä¹Ÿå¾ˆé¦™ï¼',
          likes: 3,
          comments: 3,
        },
        {
          id:23,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-2æ ¡å›­ç”Ÿæ´»/å¤´åƒ5.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/ç­”ç–‘è§£æƒ‘.png',
          username: 'é‚¹å›´æœ‰ç‡•å­çš„æ™´å¤©',
          time: '2å¤©å‰',
          content: 'å‘¨æœ«æ‰“ç¾½æ¯›çƒï¼Œæ‰¾æ­å­ï¼Œå¥³ç”Ÿ',
          likes: 4,
          comments: 4,
        },
        {
          id:24,
          avatar: '/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/å¤´åƒ3.png',
          avatarl:'/å›¾ç‰‡ç´ æ/èŽžå·¥è¶£è°ˆ/é¦–é¡µ/2-3å­¦ä¹ äº¤æµ/ç»„ä»¶/ç­”ç–‘è§£æƒ‘.png',
          username: 'Pursue',
          time: '3å¤©å‰',
          content: 'æ±‚æ­å­ï¼ŒåŽ»æŽ¢ç´¢å‘¨è¾¹ç¾Žé£Ÿ',
          likes: 5,
          comments: 5,
        }
      ]
      
    },
    currentCategory: 0, // é»˜è®¤é€‰ä¸­â€œäºŒæ‰‹äº¤æ˜“â€
    currentPosts: []
  
  },
  
  onNavItemTap(e) {
    const index = e.currentTarget.dataset.index;
    this.setData({
      currentCategory: index
    });
    this.showPostsByCategory(index);
    
  },

    showPostsByCategory(categoryIndex) {
      const categoryKey = this.data.navItems[categoryIndex];
      this.setData({
        currentPosts: this.data.posts[categoryKey]
      });
  },
  onLoad() {
    // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºé»˜è®¤åˆ†ç±»çš„å¸–å­
    this.showPostsByCategory(this.data.currentCategory);
  },
  
  onCommentTap(e) {
    const index = e.currentTarget.dataset.index;
    wx.showToast({
      title: `è¯„è®º ${this.data.posts[index].user}`,
      icon: 'none'
    });
  },
  // å®šä¹‰ handleLike æ–¹æ³•
  handleLike(e) {
    const postId = e.currentTarget.dataset.id;
    const currentPosts = this.data.currentPosts;
    const updatedPosts = currentPosts.map(post => {
      if (post.id === postId) {
        return { ...post, likes: post.likes + 1 };
      }
      return post;
    });
    this.setData({ currentPosts: updatedPosts });
    const post = updatedPosts.find(p => p.id === postId);
    this.updateLike(postId, post.likes);
  },
  updateLike(postId, likes) {
    // ç¤ºä¾‹ä¸­çš„ç½‘ç»œè¯·æ±‚
    wx.request({
      url: 'https://your-backend-api/update_likes', // æ›¿æ¢ä¸ºä½ çš„åŽç«¯ API åœ°å€
      method: 'POST',
      data: {
        postId,
        likes
      },
      success: (res) => {
        console.log('ç‚¹èµžæˆåŠŸï¼ŒåŽå°å·²æ›´æ–°ï¼š', res.data);
        // å¯ä»¥åœ¨è¿™é‡Œæç¤ºç”¨æˆ·
        wx.showToast({
          title: 'ç‚¹èµžæˆåŠŸ',
          icon: 'success'
        });
      },
      fail: (err) => {
        console.error('ç‚¹èµžå¤±è´¥ï¼š', err);
        wx.showToast({
          title: 'ç‚¹èµžå¤±è´¥',
          icon: 'none'
        });
      }
    });
  }
});